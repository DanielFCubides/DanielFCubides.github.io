<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Feature Flags With Open Feature | dfcubidesc</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="Feature Flags: The Clean Architecture Way
How OpenFeature enables incremental development while keeping your architecture clean and vendor-agnostic

The Problem with Traditional Feature Flag Implementations
Picture this: You&rsquo;re working on a critical feature for your application. The business is breathing down your neck, demanding frequent updates on progress. The feature is complex, will take weeks to complete, and you know that merging half-finished code into the main branch is a recipe for disaster.">
    <meta name="generator" content="Hugo 0.145.0">
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/posts/feature-flags-with-open-feature/">
    

    <meta property="og:url" content="http://localhost:1313/posts/feature-flags-with-open-feature/">
  <meta property="og:site_name" content="dfcubidesc">
  <meta property="og:title" content="Feature Flags With Open Feature">
  <meta property="og:description" content="Feature Flags: The Clean Architecture Way How OpenFeature enables incremental development while keeping your architecture clean and vendor-agnostic
The Problem with Traditional Feature Flag Implementations Picture this: You’re working on a critical feature for your application. The business is breathing down your neck, demanding frequent updates on progress. The feature is complex, will take weeks to complete, and you know that merging half-finished code into the main branch is a recipe for disaster.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-06-16T20:59:22-05:00">
    <meta property="article:modified_time" content="2025-06-16T20:59:22-05:00">

  <meta itemprop="name" content="Feature Flags With Open Feature">
  <meta itemprop="description" content="Feature Flags: The Clean Architecture Way How OpenFeature enables incremental development while keeping your architecture clean and vendor-agnostic
The Problem with Traditional Feature Flag Implementations Picture this: You’re working on a critical feature for your application. The business is breathing down your neck, demanding frequent updates on progress. The feature is complex, will take weeks to complete, and you know that merging half-finished code into the main branch is a recipe for disaster.">
  <meta itemprop="datePublished" content="2025-06-16T20:59:22-05:00">
  <meta itemprop="dateModified" content="2025-06-16T20:59:22-05:00">
  <meta itemprop="wordCount" content="1230">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Feature Flags With Open Feature">
  <meta name="twitter:description" content="Feature Flags: The Clean Architecture Way How OpenFeature enables incremental development while keeping your architecture clean and vendor-agnostic
The Problem with Traditional Feature Flag Implementations Picture this: You’re working on a critical feature for your application. The business is breathing down your neck, demanding frequent updates on progress. The feature is complex, will take weeks to complete, and you know that merging half-finished code into the main branch is a recipe for disaster.">

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  
  <header class="cover bg-top" style="background-image: url('http://localhost:1313/images/ideas.jpg');">
    <div class="bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        dfcubidesc
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/cv/" title="About me page">
              About me
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/posts/" title="Interesting Ideas page">
              Interesting Ideas
            </a>
          </li>
          
        </ul>
      
      
<div class="ananke-socials">
  
</div>

    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        
          <div class="f2 f1-l fw2 white-90 mb0 lh-title">Feature Flags With Open Feature</div>
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Interesting Ideas
      </aside>
      








  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">Feature Flags With Open Feature</h1>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2025-06-16T20:59:22-05:00">June 16, 2025</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><h1 id="feature-flags-the-clean-architecture-way">Feature Flags: The Clean Architecture Way</h1>
<p><em>How OpenFeature enables incremental development while keeping your architecture clean and vendor-agnostic</em></p>
<hr>
<h2 id="the-problem-with-traditional-feature-flag-implementations">The Problem with Traditional Feature Flag Implementations</h2>
<p>Picture this: You&rsquo;re working on a critical feature for your application. The business is breathing down your neck, demanding frequent updates on progress. The feature is complex, will take weeks to complete, and you know that merging half-finished code into the main branch is a recipe for disaster.</p>
<p>What do you do? You create a feature branch, of course. But now you&rsquo;re living in isolation, watching as the main branch evolves without you, knowing that each passing day makes your eventual merge more painful.</p>
<p>This is where feature flags come to the rescue. But here&rsquo;s where most teams make a crucial mistake: they tightly couple their application code to a specific feature flag provider. They embed vendor-specific SDKs throughout their codebase, creating what I call &ldquo;vendor lock-in debt.&rdquo;</p>
<h2 id="the-dependency-inversion-principle-applied-to-feature-flags">The Dependency Inversion Principle Applied to Feature Flags</h2>
<p>Uncle Bob taught us that high-level modules should not depend on low-level modules. Both should depend on abstractions. This principle applies just as much to feature flag systems as it does to databases, web frameworks, or any other external dependency.</p>
<p>Consider this typical, problematic approach:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// BAD: Tightly coupled to LaunchDarkly</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;github.com/launchdarkly/go-server-sdk/v6&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">ProcessPayment</span>(<span style="color:#a6e22e">userID</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">amount</span> <span style="color:#66d9ef">float64</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Direct dependency on LaunchDarkly client</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">client</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">ldclient</span>.<span style="color:#a6e22e">Get</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">useNewPaymentFlow</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">BoolVariation</span>(<span style="color:#e6db74">&#34;new-payment-flow&#34;</span>, 
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">ldcontext</span>.<span style="color:#a6e22e">NewBuilder</span>(<span style="color:#a6e22e">userID</span>).<span style="color:#a6e22e">Build</span>(), <span style="color:#66d9ef">false</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">useNewPaymentFlow</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">processPaymentV2</span>(<span style="color:#a6e22e">userID</span>, <span style="color:#a6e22e">amount</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">processPaymentV1</span>(<span style="color:#a6e22e">userID</span>, <span style="color:#a6e22e">amount</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>What&rsquo;s wrong with this code? Everything. It violates the Dependency Inversion Principle, the Open-Closed Principle, and makes testing unnecessarily difficult. Worse yet, it locks you into LaunchDarkly forever.</p>
<h2 id="enter-openfeature-the-solid-way">Enter OpenFeature: The SOLID Way</h2>
<p>OpenFeature provides us with exactly what we need: a vendor-neutral abstraction that allows us to depend on interfaces, not implementations. Let&rsquo;s see how to do it right:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#75715e">// GOOD: Depending on abstractions</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">FeatureFlags</span> <span style="color:#66d9ef">interface</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">GetBoolFlag</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">flagKey</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">defaultValue</span> <span style="color:#66d9ef">bool</span>) <span style="color:#66d9ef">bool</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">GetStringFlag</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">flagKey</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">defaultValue</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">GetIntFlag</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">flagKey</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">defaultValue</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">PaymentProcessor</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">flags</span> <span style="color:#a6e22e">FeatureFlags</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewPaymentProcessor</span>(<span style="color:#a6e22e">flags</span> <span style="color:#a6e22e">FeatureFlags</span>) <span style="color:#f92672">*</span><span style="color:#a6e22e">PaymentProcessor</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">PaymentProcessor</span>{<span style="color:#a6e22e">flags</span>: <span style="color:#a6e22e">flags</span>}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">p</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">PaymentProcessor</span>) <span style="color:#a6e22e">ProcessPayment</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">userID</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">amount</span> <span style="color:#66d9ef">float64</span>) <span style="color:#66d9ef">error</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">useNewFlow</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">flags</span>.<span style="color:#a6e22e">GetBoolFlag</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#e6db74">&#34;new-payment-flow&#34;</span>, <span style="color:#66d9ef">false</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">useNewFlow</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">processPaymentV2</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">userID</span>, <span style="color:#a6e22e">amount</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">processPaymentV1</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">userID</span>, <span style="color:#a6e22e">amount</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Now our <code>PaymentProcessor</code> depends on an abstraction, not a concrete implementation. We can inject any feature flag provider that implements our interface.</p>
<h2 id="implementing-the-openfeature-adapter">Implementing the OpenFeature Adapter</h2>
<p>Here&rsquo;s how we implement our abstraction using OpenFeature:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">featureflags</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;context&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;github.com/open-feature/go-sdk/openfeature&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">OpenFeatureAdapter</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">client</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">openfeature</span>.<span style="color:#a6e22e">Client</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">NewOpenFeatureAdapter</span>() <span style="color:#f92672">*</span><span style="color:#a6e22e">OpenFeatureAdapter</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">client</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">openfeature</span>.<span style="color:#a6e22e">NewClient</span>(<span style="color:#e6db74">&#34;vacation-planner&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">OpenFeatureAdapter</span>{<span style="color:#a6e22e">client</span>: <span style="color:#a6e22e">client</span>}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">a</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">OpenFeatureAdapter</span>) <span style="color:#a6e22e">GetBoolFlag</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">flagKey</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">defaultValue</span> <span style="color:#66d9ef">bool</span>) <span style="color:#66d9ef">bool</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">result</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">BooleanValue</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">flagKey</span>, <span style="color:#a6e22e">defaultValue</span>, <span style="color:#a6e22e">openfeature</span>.<span style="color:#a6e22e">EvaluationContext</span>{})
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">result</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">a</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">OpenFeatureAdapter</span>) <span style="color:#a6e22e">GetStringFlag</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">flagKey</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">defaultValue</span> <span style="color:#66d9ef">string</span>) <span style="color:#66d9ef">string</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">result</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">StringValue</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">flagKey</span>, <span style="color:#a6e22e">defaultValue</span>, <span style="color:#a6e22e">openfeature</span>.<span style="color:#a6e22e">EvaluationContext</span>{})
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">result</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">a</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">OpenFeatureAdapter</span>) <span style="color:#a6e22e">GetIntFlag</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">flagKey</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">defaultValue</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">result</span>, <span style="color:#a6e22e">_</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">client</span>.<span style="color:#a6e22e">IntValue</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">flagKey</span>, int64(<span style="color:#a6e22e">defaultValue</span>), <span style="color:#a6e22e">openfeature</span>.<span style="color:#a6e22e">EvaluationContext</span>{})
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> int(<span style="color:#a6e22e">result</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="the-power-of-provider-flexibility">The Power of Provider Flexibility</h2>
<p>The beauty of this approach becomes evident when you need to switch providers. Let&rsquo;s say you start with a simple in-memory provider for local development:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;context&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;github.com/open-feature/go-sdk/openfeature&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e6db74">&#34;github.com/open-feature/go-sdk/openfeature/memprovider&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Local development: use in-memory provider</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">flags</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;new-payment-flow&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;enable-analytics&#34;</span>: <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;api-timeout&#34;</span>: <span style="color:#ae81ff">5000</span>,
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">provider</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">memprovider</span>.<span style="color:#a6e22e">NewInMemoryProvider</span>(<span style="color:#a6e22e">flags</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">openfeature</span>.<span style="color:#a6e22e">SetProvider</span>(<span style="color:#a6e22e">provider</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Your application code remains unchanged</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">flagAdapter</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">featureflags</span>.<span style="color:#a6e22e">NewOpenFeatureAdapter</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">paymentProcessor</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewPaymentProcessor</span>(<span style="color:#a6e22e">flagAdapter</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Use your payment processor...</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Later, when you&rsquo;re ready for production, you simply swap the provider:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Production: use LaunchDarkly provider</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">provider</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">launchdarkly</span>.<span style="color:#a6e22e">NewProvider</span>(<span style="color:#e6db74">&#34;your-sdk-key&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">openfeature</span>.<span style="color:#a6e22e">SetProvider</span>(<span style="color:#a6e22e">provider</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Same application code, different provider</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">flagAdapter</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">featureflags</span>.<span style="color:#a6e22e">NewOpenFeatureAdapter</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">paymentProcessor</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewPaymentProcessor</span>(<span style="color:#a6e22e">flagAdapter</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Your business logic is completely unaffected</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="incremental-development-the-right-way">Incremental Development: The Right Way</h2>
<p>Feature flags enable a development workflow that would make any craftsman proud. Instead of long-lived branches that create integration nightmares, you can develop incrementally:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">VacationService</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">flags</span> <span style="color:#a6e22e">FeatureFlags</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">oldBookingEngine</span> <span style="color:#a6e22e">BookingEngine</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">newBookingEngine</span> <span style="color:#a6e22e">BookingEngine</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">v</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">VacationService</span>) <span style="color:#a6e22e">BookVacation</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">request</span> <span style="color:#a6e22e">BookingRequest</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">Booking</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">useNewEngine</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">flags</span>.<span style="color:#a6e22e">GetBoolFlag</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#e6db74">&#34;new-booking-engine&#34;</span>, <span style="color:#66d9ef">false</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">useNewEngine</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// New implementation being developed</span>
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">newBookingEngine</span>.<span style="color:#a6e22e">Book</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">request</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Stable, existing implementation</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">oldBookingEngine</span>.<span style="color:#a6e22e">Book</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">request</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>This allows you to:</p>
<ol>
<li><strong>Deploy incomplete features safely</strong> - The flag starts as <code>false</code>, so only you see the new code</li>
<li><strong>Test in production</strong> - Enable the flag for your test accounts only</li>
<li><strong>Gradual rollout</strong> - Enable for 1% of users, then 10%, then 100%</li>
<li><strong>Instant rollback</strong> - If something goes wrong, flip the flag back to <code>false</code></li>
</ol>
<h2 id="context-aware-feature-flags">Context-Aware Feature Flags</h2>
<p>OpenFeature&rsquo;s evaluation context allows for sophisticated targeting:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">v</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">VacationService</span>) <span style="color:#a6e22e">BookVacation</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">user</span> <span style="color:#a6e22e">User</span>, <span style="color:#a6e22e">request</span> <span style="color:#a6e22e">BookingRequest</span>) (<span style="color:#f92672">*</span><span style="color:#a6e22e">Booking</span>, <span style="color:#66d9ef">error</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">evaluationCtx</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">openfeature</span>.<span style="color:#a6e22e">NewEvaluationContext</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">ID</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;email&#34;</span>: <span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">Email</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;tier&#34;</span>: <span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">Tier</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;country&#34;</span>: <span style="color:#a6e22e">user</span>.<span style="color:#a6e22e">Country</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>    )
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">useNewEngine</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">flags</span>.<span style="color:#a6e22e">GetBoolFlagWithContext</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#e6db74">&#34;new-booking-engine&#34;</span>, <span style="color:#66d9ef">false</span>, <span style="color:#a6e22e">evaluationCtx</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">useNewEngine</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">newBookingEngine</span>.<span style="color:#a6e22e">Book</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">request</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">oldBookingEngine</span>.<span style="color:#a6e22e">Book</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">request</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Now you can enable features based on user attributes, geographic location, subscription tiers, or any other criteria that makes business sense.</p>
<h2 id="testing-the-clean-architecture-advantage">Testing: The Clean Architecture Advantage</h2>
<p>Because we&rsquo;ve inverted our dependencies, testing becomes trivial:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">MockFeatureFlags</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">flags</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">m</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">MockFeatureFlags</span>) <span style="color:#a6e22e">GetBoolFlag</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">key</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">defaultValue</span> <span style="color:#66d9ef">bool</span>) <span style="color:#66d9ef">bool</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> <span style="color:#a6e22e">val</span>, <span style="color:#a6e22e">exists</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">m</span>.<span style="color:#a6e22e">flags</span>[<span style="color:#a6e22e">key</span>]; <span style="color:#a6e22e">exists</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">val</span>.(<span style="color:#66d9ef">bool</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">defaultValue</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">TestPaymentProcessor_NewFlow</span>(<span style="color:#a6e22e">t</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">testing</span>.<span style="color:#a6e22e">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Arrange</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">mockFlags</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">MockFeatureFlags</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">flags</span>: <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">interface</span>{}{
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#34;new-payment-flow&#34;</span>: <span style="color:#66d9ef">true</span>,
</span></span><span style="display:flex;"><span>        },
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">processor</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">NewPaymentProcessor</span>(<span style="color:#a6e22e">mockFlags</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Act</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">err</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">processor</span>.<span style="color:#a6e22e">ProcessPayment</span>(<span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Background</span>(), <span style="color:#e6db74">&#34;user123&#34;</span>, <span style="color:#ae81ff">100.0</span>)
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Assert</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">assert</span>.<span style="color:#a6e22e">NoError</span>(<span style="color:#a6e22e">t</span>, <span style="color:#a6e22e">err</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Verify new flow was used...</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>No external dependencies, no network calls, no complex mocking frameworks. Just pure, fast unit tests.</p>
<h2 id="the-architectural-benefits">The Architectural Benefits</h2>
<p>This approach delivers several key benefits:</p>
<h3 id="1-vendor-independence">1. <strong>Vendor Independence</strong></h3>
<p>Your business logic never touches vendor-specific code. You can switch from LaunchDarkly to Split to Flagsmith without changing a single line of business logic.</p>
<h3 id="2-testability">2. <strong>Testability</strong></h3>
<p>Every component that uses feature flags can be easily unit tested with mock implementations.</p>
<h3 id="3-single-responsibility">3. <strong>Single Responsibility</strong></h3>
<p>Your feature flag logic is separated from your business logic. Each has one reason to change.</p>
<h3 id="4-extensibility">4. <strong>Extensibility</strong></h3>
<p>Need to add logging to all flag evaluations? Implement a decorator around your adapter. Want to cache flag values? Another decorator. The Open-Closed Principle in action.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">LoggingFeatureFlags</span> <span style="color:#66d9ef">struct</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">wrapped</span> <span style="color:#a6e22e">FeatureFlags</span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">logger</span>  <span style="color:#a6e22e">Logger</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">func</span> (<span style="color:#a6e22e">l</span> <span style="color:#f92672">*</span><span style="color:#a6e22e">LoggingFeatureFlags</span>) <span style="color:#a6e22e">GetBoolFlag</span>(<span style="color:#a6e22e">ctx</span> <span style="color:#a6e22e">context</span>.<span style="color:#a6e22e">Context</span>, <span style="color:#a6e22e">key</span> <span style="color:#66d9ef">string</span>, <span style="color:#a6e22e">defaultValue</span> <span style="color:#66d9ef">bool</span>) <span style="color:#66d9ef">bool</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">result</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">l</span>.<span style="color:#a6e22e">wrapped</span>.<span style="color:#a6e22e">GetBoolFlag</span>(<span style="color:#a6e22e">ctx</span>, <span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">defaultValue</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">l</span>.<span style="color:#a6e22e">logger</span>.<span style="color:#a6e22e">Info</span>(<span style="color:#e6db74">&#34;Feature flag evaluated&#34;</span>, 
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;key&#34;</span>, <span style="color:#a6e22e">key</span>, 
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;result&#34;</span>, <span style="color:#a6e22e">result</span>, 
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#34;default&#34;</span>, <span style="color:#a6e22e">defaultValue</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">result</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="conclusion-craftsmanship-in-action">Conclusion: Craftsmanship in Action</h2>
<p>Feature flags, when implemented correctly, are more than just a deployment tool—they&rsquo;re an enabler of true incremental development and continuous delivery. By applying the SOLID principles and depending on abstractions rather than implementations, we create systems that are:</p>
<ul>
<li><strong>Flexible</strong> - Easy to change providers or add new capabilities</li>
<li><strong>Testable</strong> - Every component can be isolated and tested</li>
<li><strong>Maintainable</strong> - Clear separation of concerns and responsibilities</li>
<li><strong>Robust</strong> - No single point of failure or vendor lock-in</li>
</ul>
<p>OpenFeature provides us with the abstraction we need to build these systems correctly. It allows us to focus on what matters most: delivering value to our users through clean, well-crafted code.</p>
<p>Remember: The goal is not just to make our code work today, but to make it work well tomorrow, next month, and next year. That&rsquo;s the mark of true craftsmanship.</p>
<p>As Uncle Bob reminds us: &ldquo;The only way to go fast is to go well.&rdquo; Feature flags, implemented with clean architecture principles, help us do exactly that.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  dfcubidesc 2025 
  </a>
    <div>
<div class="ananke-socials">
  
</div>
</div>
  </div>
</footer>

  </body>
</html>
